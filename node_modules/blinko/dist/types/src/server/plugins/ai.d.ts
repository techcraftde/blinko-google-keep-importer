import 'pdf-parse';
import { AIMessage, HumanMessage } from '@langchain/core/messages';
import { ProgressResult } from './memos';
import { Context } from '../context';
import { CoreMessage } from '@mastra/core';
import { LibSQLVector } from '@mastra/core/vector/libsql';
export declare function isImage(filePath: string): boolean;
export declare class AiService {
    static isImage: typeof isImage;
    static loadFileContent(filePath: string): Promise<string>;
    static embeddingDeleteAll(id: number, VectorStore: LibSQLVector): Promise<void>;
    static embeddingDeleteAllAttachments(filePath: string, VectorStore: LibSQLVector): Promise<void>;
    static embeddingUpsert({ id, content, type, createTime, updatedAt }: {
        id: number;
        content: string;
        type: 'update' | 'insert';
        createTime: Date;
        updatedAt?: Date;
    }): Promise<{
        ok: boolean;
        msg: string;
        error?: undefined;
    } | {
        ok: boolean;
        msg?: undefined;
        error?: undefined;
    } | {
        ok: boolean;
        error: any;
        msg?: undefined;
    }>;
    static embeddingInsertAttachments({ id, updatedAt, filePath }: {
        id: number;
        updatedAt?: Date;
        filePath: string;
    }): Promise<{
        ok: boolean;
        error?: undefined;
    } | {
        ok: boolean;
        error: any;
    }>;
    static embeddingDelete({ id }: {
        id: number;
    }): Promise<{
        ok: boolean;
    }>;
    static rebuildEmbeddingIndex({ force }: {
        force?: boolean;
    }): AsyncGenerator<ProgressResult & {
        progress?: {
            current: number;
            total: number;
        };
    }, void, unknown>;
    static getChatHistory({ conversations }: {
        conversations: {
            role: string;
            content: string;
        }[];
    }): (HumanMessage | AIMessage)[];
    static enhanceQuery({ query, ctx }: {
        query: string;
        ctx: Context;
    }): Promise<any>;
    static completions({ question, conversations, withTools, withRAG, withOnline, systemPrompt, ctx, }: {
        question: string;
        conversations: CoreMessage[];
        withTools?: boolean;
        withRAG?: boolean;
        withOnline?: boolean;
        systemPrompt?: string;
        ctx: Context;
    }): Promise<{
        result: import("ai").StreamTextResult<any, unknown>;
        notes: any[];
    }>;
    static AIComment({ content, noteId }: {
        content: string;
        noteId: number;
    }): Promise<any>;
    static postProcessNote({ noteId, ctx }: {
        noteId: number;
        ctx: Context;
    }): Promise<{
        success: boolean;
        message: any;
    }>;
}
